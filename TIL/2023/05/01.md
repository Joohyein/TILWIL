**책 네트워크 Chapter8**

**복습**

OSI 참조 모델은 7개의 계층으로 나뉘어 있고 각각의 순서와 규칙이 설정되어 있다. 그것을 순서대로 실행함으로써 데이터 통신이 가능해진다.

- 송신측 : 7계층 → 1계층
- 수신측 : 1계층 → 7계층

## 순서의 흐름

네트워크는 패킷 교환 방식이다. 택배를 예로 들면 소포가 패킷 역할을 한다.

<aside>
💡 **택배 포장**
운반할 물품에 운송에 필요한 것을 덧붙여간다.
- 송신 : 완충재 → 상자 → 수신자명, 내용물(택배 송장)
- 수신 : 택배 송장을 벗김 → 상자에서 꺼냄  → 완충재 제거 → 내용물 입수

</aside>

**패킷 교환 방식**에서 각각의 패킷에 수신처를 붙이는데 그것 말고도 각각의 **프로토콜**에서 필요한 정보를 덧붙여 가야 한다. 데이터 말고도 네트워크상에서의 컴퓨터 주소같은 것들을 데이터와 함께 보낸다. 데이터와 데이터를 보내기 위해 필요한 것들이 통합된 상태를 **프로토콜 데이터 유닛(Protocol Data Unit: PDU)**이라고 한다.

택배로 치면 보내고 싶은 것이 데이터이고 그것을 상자에 넣은 상태가 PDU이다.

## 캡슐화

OSI 참조 모델에서 7계층에서 1계층의 순서대로 실행하는데 계층이라는 단계를 실시할 때마다 거기에서 필요한 정보를 추가할 수 있다.

<aside>
💡 **제어 데이터의 부가**
데이터에 통신에 필요한 데이터(제어 데이터)를 덧붙여간다.

</aside>

- 메시지에 4계층의 제어정보를 덧붙인 상태를 세그먼트 또는 데이터그램이라고 부른다.
- 3계층의 제어정보를 덧붙인 상태를 데이터그램으리고 부르는데 실제로는 그 앞에 프로토콜명을 붙여서 ‘TCP 세그먼트’라던가 ‘IP 데이터그램’이라고 부르는 게 일반적이다.
- 또는 ‘4계층 PDU’ 처럼 계층 번호를 붙여서 부르는 경우도 있다.

<aside>
💡 ‘4계층 PDU’ = 세그먼트 || 데이터그램

</aside>

<aside>
💡 **캡슐화**
운반하고 싶은 데이터에 헤더를 추가해 ‘캡슐’을 만들어 간다.

</aside>

| 계층   | 호칭         | 내용                   |
| ------ | ------------ | ---------------------- |
| 사용자 | 데이터(Data) | 송수신하고 싶은 데이터 |

| 7계층 PDU
6계층 PDU
5계층 PDU | 메시지(Message) | 데이터를 통신용으로 변환한 것과
7계층 헤더 |
| 4계층 PDU | 세그먼트(Segement)
데이터그램(Datagram) | 메시지와 4계층 헤더 |
| 3계층 PDU | 데이터그램(Datagram) | 세그먼트, 데이터그램과 3계층 헤더 |
| 2계층 PDU | 프레임(Frame) | 데이터그램과 2계층 헤더
(2계층 꼬리부) |
| 1계층 | 신호 | 프레임을 전송매체로 운반하기 위한
신호로 변환 |

캡슐화에서 추가되는 제어 데이터가 앞에 붙이면 헤더, 뒤에 붙이면 꼬리부라고 부른다. 또한 헤더는 그 계층의 프로토콜명이나 계층의 번호를 붙여서 ‘TCP 헤더’라든가 ‘4계층 헤더’라는 식으로도 부른다.

- 오늘의 포인트
  - 통신할 때 송신하는 것은 보내고 싶은 데이터 뿐만 아니라 제어용 정보도 필요하다.
  - 계층의 순서대로 헤더라 부가되어가는 것을 캡슐화라고 한다.
  - 수신한 쪽은 반대의 순서로 헤더를 벗겨서 데이터를 입수한다.
